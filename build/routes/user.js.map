{"version":3,"sources":["routes/user.js"],"names":["router","express","Router","get","authMiddleware","req","res","logger","info","id","locals","user","userAccountDAO","findById","status","json","code","error","data","toString","message"],"mappings":";;;;;;;;;;;;;;AAEA;;;;AACA;;AACA;;AACA;;;;;;AAEA,IAAMA,SAASC,kBAAQC,MAAR,EAAf;;AAEAF,OAAOG,GAAP,CAAW,KAAX,EAAkBC,0BAAlB;AAAA,qFAAkC,iBAAOC,GAAP,EAAqBC,GAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AACjCC,uBAAOC,IAAP,CAAY,sBAAZ;AADiC;AAGxBC,QAHwB,GAGjBH,IAAII,MAAJ,CAAWC,IAHM,CAGxBF,EAHwB;AAAA;AAAA,aAIbG,qBAAeC,QAAf,CAAwBJ,EAAxB,CAJa;;AAAA;AAI1BE,UAJ0B;;AAKhCL,UAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACpBC,aAAM,GADc;AAEpBC,cAAO,KAFa;AAGpBC,aAAMP;AAHc,OAArB;AALgC;AAAA;;AAAA;AAAA;AAAA;;AAWhCJ,uBAAOU,KAAP,2BAAqC,YAAME,QAAN,EAArC;AACAb,UAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACpBC,aAAM,GADc;AAEpBC,cAAO,IAFa;AAGpBG,gBAAS;AAHW,OAArB;;AAZgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAlC;;AAAA;AAAA;AAAA;AAAA;;kBAoBepB,M","file":"user.js","sourcesContent":["// @flow\n\nimport express from 'express';\nimport { userAccountDAO } from '../daos';\nimport { authMiddleware } from './middleware';\nimport logger from '../helper/logger';\n\nconst router = express.Router();\n\nrouter.get('/me', authMiddleware, async (req: Request, res: Response) => {\n\tlogger.info('User Router: GET /me');\n\ttry {\n\t\tconst { id } = res.locals.user;\n\t\tconst user = await userAccountDAO.findById(id);\n\t\tres.status(200).json({\n\t\t\tcode: 200,\n\t\t\terror: false,\n\t\t\tdata: user\n\t\t});\n\t} catch (error) {\n\t\tlogger.error(`User Router: GET /me ${error.toString()}`);\n\t\tres.status(500).json({\n\t\t\tcode: 500,\n\t\t\terror: true,\n\t\t\tmessage: 'Get Profile Failed'\n\t\t});\n\t}\n});\n\nexport default router;"]}